!function(e){function t(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){!function(){if("undefined"==typeof AFRAME)return void console.error("Component attempted to register before AFRAME was available.");var e={example:o(1).component};Object.keys(e).forEach(function(t){AFRAME.aframeCore?AFRAME.aframeCore.registerComponent(t,e[t]):AFRAME.registerComponent(t,e[t])})}()},function(e,t){var o=Math.PI/2;e.exports.component={dependencies:["rotation"],schema:{enabled:{"default":!0},sensitivity:{"default":1}},init:function(){console.log("init called"),this.pitchObject=new THREE.Object3D,this.yawObject=new THREE.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject),this.isSupported="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,this.bindFunctions(),this.isSupported&&this.initListeners()},initListeners:function(){var e=this.el.sceneEl,t=e.canvas;document.addEventListener("pointerlockchange",this.onLockChange.bind(this),!1),document.addEventListener("mozpointerlockchange",this.onLockChange.bind(this),!1),document.addEventListener("webkitpointerlockchange",this.onLockChange.bind(this),!1),document.addEventListener("pointerlockerror",this.onLockError,!1),document.addEventListener("mozpointerlockerror",this.onLockError,!1),document.addEventListener("webkitpointerlockerror",this.onLockError,!1),t.onclick=this.captureMouse.bind(this),e.addBehavior(this)},bindFunctions:function(){this.onMouseMoveL=this.onMouseMove.bind(this)},remove:function(){var e=this.el.sceneEl;this.releaseMouse(),e.removeBehavior(this)},captureMouse:function(){var e=this.el.sceneEl;e.requestPointerLock=e.canvas.requestPointerLock||e.canvas.mozRequestPointerLock||e.canvas.webkitRequestPointerLock,e.requestPointerLock()},releaseMouse:function(){document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock()},onLockChange:function(e){var t=this.el.sceneEl;document.pointerLockElement===t||document.mozPointerLockElement===t||document.webkitPointerLockElement===t?document.addEventListener("mousemove",this.onMouseMoveL,!1):(console.log("pointer unlock"),document.removeEventListener("mousemove",this.onMouseMoveL,!1))},onLockError:function(e){console.trace(e)},update:function(){this.data.enabled&&this.updateOrientation()},updateOrientation:function(){var e=new THREE.Euler;return e.order="YXZ",function(){var e=this.pitchObject,t=this.yawObject;this.el.setAttribute("rotation",{x:THREE.Math.radToDeg(e.rotation.x),y:THREE.Math.radToDeg(t.rotation.y)})}}(),onMouseMove:function(e){if(this.data.enabled){var t=e.movementX||e.mozMovementX||e.webkitMovementX||0,n=e.movementY||e.mozMovementY||e.webkitMovementY||0;this.yawObject.rotation.y-=.002*t*this.data.sensitivity,this.pitchObject.rotation.x-=.002*n*this.data.sensitivity,this.pitchObject.rotation.x=Math.max(-o,Math.min(o,this.pitchObject.rotation.x))}}}}]);